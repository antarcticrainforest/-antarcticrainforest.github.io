<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UM General Atmosphere: comobs_mod Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="unified_model_logo_2.jpeg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UM General Atmosphere
   &#160;<span id="projectnumber">8.6</span>
   </div>
   <div id="projectbrief">UK Met Offices Unified Model</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">comobs_mod Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file belongs in section: AC Assimilation.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcomobs__mod_1_1obs__info__type.xhtml">obs_info_type</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a88df39d749a2203b2119ea0b819c5da2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecomobs__mod.xhtml#a88df39d749a2203b2119ea0b819c5da2">ndatavmx</a> = 6+3*model_levels_max</td></tr>
<tr class="memdesc:a88df39d749a2203b2119ea0b819c5da2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This module contains parameters relating to observations in atmospheric AC assimilation The AC Observation files are read in at the start of an assimilation (in routine RDOBS2). The observations are then merged and any observations not required by the assimilation to follow will be compressed out. The required observations are then written to a temporary file attached to Unit 15.  <a href="#a88df39d749a2203b2119ea0b819c5da2">More...</a><br /></td></tr>
<tr class="separator:a88df39d749a2203b2119ea0b819c5da2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae18fbec0dcfab9374913f5e5d226df43"><td class="memItemLeft" align="right" valign="top"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecomobs__mod.xhtml#ae18fbec0dcfab9374913f5e5d226df43">noblevmx</a> = model_levels_max+1</td></tr>
<tr class="separator:ae18fbec0dcfab9374913f5e5d226df43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa62f98a6e7c54be1716fc5de467b3f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecomobs__mod.xhtml#aaa62f98a6e7c54be1716fc5de467b3f9">max_num_acob_files</a> = 100</td></tr>
<tr class="separator:aaa62f98a6e7c54be1716fc5de467b3f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42a43e908a81c030c763bee34321a12a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecomobs__mod.xhtml#a42a43e908a81c030c763bee34321a12a">num_ob_file_types</a> = 11</td></tr>
<tr class="separator:a42a43e908a81c030c763bee34321a12a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b9f81bde395513b5b1053ae84c5d7d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecomobs__mod.xhtml#a34b9f81bde395513b5b1053ae84c5d7d">nobtypmx</a> = 182</td></tr>
<tr class="separator:a34b9f81bde395513b5b1053ae84c5d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbd8f155185b549a21a27cb69473c633"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structcomobs__mod_1_1obs__info__type.xhtml">obs_info_type</a>)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecomobs__mod.xhtml#afbd8f155185b549a21a27cb69473c633">obs_info</a></td></tr>
<tr class="separator:afbd8f155185b549a21a27cb69473c633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa71c1b9ef72a7a49617c59274ace3c04"><td class="memItemLeft" align="right" valign="top"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecomobs__mod.xhtml#aa71c1b9ef72a7a49617c59274ace3c04">obs_info_int_len</a> = (8 * <a class="el" href="namespacecomobs__mod.xhtml#a34b9f81bde395513b5b1053ae84c5d7d">nobtypmx</a>) + (2 * <a class="el" href="namespacecomobs__mod.xhtml#aaa62f98a6e7c54be1716fc5de467b3f9">max_num_acob_files</a>) + 9</td></tr>
<tr class="separator:aa71c1b9ef72a7a49617c59274ace3c04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e22e1f6c8ca01506bdcb5efae88e6a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecomobs__mod.xhtml#a8e22e1f6c8ca01506bdcb5efae88e6a0">obs_info_real_len</a> = (2 * <a class="el" href="namespacecomobs__mod.xhtml#ae18fbec0dcfab9374913f5e5d226df43">noblevmx</a> + 1) * <a class="el" href="namespacecomobs__mod.xhtml#a34b9f81bde395513b5b1053ae84c5d7d">nobtypmx</a> + 7</td></tr>
<tr class="separator:a8e22e1f6c8ca01506bdcb5efae88e6a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde5a5eee19c96292939a024cc5571b4"><td class="memItemLeft" align="right" valign="top">character(len=256), dimension(<a class="el" href="namespacecomobs__mod.xhtml#aaa62f98a6e7c54be1716fc5de467b3f9">max_num_acob_files</a>)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecomobs__mod.xhtml#acde5a5eee19c96292939a024cc5571b4">used_files</a></td></tr>
<tr class="separator:acde5a5eee19c96292939a024cc5571b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb5b007cd8dac6d931de9e1894338968"><td class="memItemLeft" align="right" valign="top">character(len=30), dimension(<a class="el" href="namespacecomobs__mod.xhtml#a42a43e908a81c030c763bee34321a12a">num_ob_file_types</a>)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecomobs__mod.xhtml#adb5b007cd8dac6d931de9e1894338968">ob_file_type</a> = (/'Surface ', 'Sonde ', 'Aircraft ', 'Sat120 ', 'Sat500 ', 'GLOSS ', 'Satwind ', 'Scatwind ', 'MOPS ', 'Precip ', 'Test '/)</td></tr>
<tr class="separator:adb5b007cd8dac6d931de9e1894338968"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file belongs in section: AC Assimilation. </p>
<p>This file belongs in section: AC Assimilation </p>
</div><h2 class="groupheader">Variable Documentation</h2>
<a id="aaa62f98a6e7c54be1716fc5de467b3f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa62f98a6e7c54be1716fc5de467b3f9">&#9670;&nbsp;</a></span>max_num_acob_files</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter comobs_mod::max_num_acob_files = 100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="comobs__mod_8f90_source.xhtml#l00090">90</a> of file <a class="el" href="comobs__mod_8f90_source.xhtml">comobs_mod.f90</a>.</p>

</div>
</div>
<a id="a88df39d749a2203b2119ea0b819c5da2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88df39d749a2203b2119ea0b819c5da2">&#9670;&nbsp;</a></span>ndatavmx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter comobs_mod::ndatavmx = 6+3*model_levels_max</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This module contains parameters relating to observations in atmospheric AC assimilation The AC Observation files are read in at the start of an assimilation (in routine RDOBS2). The observations are then merged and any observations not required by the assimilation to follow will be compressed out. The required observations are then written to a temporary file attached to Unit 15. </p>
<p>On each timestep the observations are read in from Unit 15 and assimilated. This is done until the AC Observation files need to be read in again which will normally be every 6 (3) hours for a global (elf) assimilation. A new set of observations will then be written to unit 15. COMOBS contains informtion on the observations in store. Observations are assigned to types. Each type provides one sort of information and has its own detailed format. Note that one observation report may be in several types, for example, a sonde observation may report temperature, wind and Relative Humidity and the data will come under types 201, 301 and 401 respectively. There are NOBTYP types which are listed in OBSTYP. The The observation types are listed in decreasing order of the number of data values in NDATAV. Each type OBSTYP(J) has :!&gt;</p><ol type="1">
<li>NOBS(J) observations stored for it.</li>
<li>NDATAV(J) data values in each obs.</li>
<li>A total of NDATAV(J)*NOBS(J) data values. The array MDISPOBT gives the displacement to the first observation of each type. ie. MDISPOBT(1)=0 and MDISPOBT(J+1)=MDISPOBT(J)+NOBS(J) The Total number of observations and data values after merging the observation files are TNOBS and TNDV respectively. Maximum allowed values of NOBTYP is NOBTYPMX Maximum allowed values of NDATAV is NDATAVMX Maximum allowed values of TNDV is TNDVMAX MAXNLEV1 - Maximum no of levels for any obs type in OBSTYP + 1 MDISPOBT - Offset to first obs for each type in OBS. MISSD - Value used for missing data in obs files (=5555.0) NDATAV - No of data values for each type in OBSTYP. NDVHDR - First NDVHDR data values common to all observations. NERLEV1 - No of data value corresponding to first error ratio<ul>
<li>for each type in OBSTYP. NOBLEV - No of levels for each type in OBSTYP. NOBS - No of obs for each type in OBSTYP. NOBTYP - No of observation types in OBSTYP. OBLAYERB - Pressure Levels of layer boundaries for each type.</li>
<li>Set to MISSD for obs types not concerned. OBLEVELS - Obs Pressure Levels for each type.</li>
<li>Set to MISSD for obs types not concerned. OBLEVTYP - Level Type obs data in on for each type in OBSTYP. OBSTYP - List of observation types in observation files. OBS_LAT_N - N ) Boundaries of area for OBS_LAT_S - S ) which obs are to fetched for. OBS_LONG_W - W ) OBS_LONG_E - E ) OBS_REF_YY - Year ) Reference OBS_REF_MM - Month ) Time/Date for observations OBS_REF_DD - Day ) = Start of assimilation. OBS_REF_HH - Hour ) OBS_REF_MIN - Mins ) OBS_NO_ST - Offset to first observation number for each type TIMEINT - Interval in minutes between reading obs files. TIMENEXT - Time in minutes relative to start of assimilation</li>
<li>when obs files are next to be read. Note that some variables are stored as an instance of a sequenced type. This allows communication via MPI in a fairly safe manner. Any changes to the sequenced type will need to ensure that INTEGERS are seperate from REALs and that the obs_info_int_len and obs_info_real_len variables are updated appropriately. </li>
</ul>
</li>
</ol>

<p class="definition">Definition at line <a class="el" href="comobs__mod_8f90_source.xhtml#l00088">88</a> of file <a class="el" href="comobs__mod_8f90_source.xhtml">comobs_mod.f90</a>.</p>

</div>
</div>
<a id="ae18fbec0dcfab9374913f5e5d226df43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae18fbec0dcfab9374913f5e5d226df43">&#9670;&nbsp;</a></span>noblevmx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter comobs_mod::noblevmx = model_levels_max+1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="comobs__mod_8f90_source.xhtml#l00089">89</a> of file <a class="el" href="comobs__mod_8f90_source.xhtml">comobs_mod.f90</a>.</p>

</div>
</div>
<a id="a34b9f81bde395513b5b1053ae84c5d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34b9f81bde395513b5b1053ae84c5d7d">&#9670;&nbsp;</a></span>nobtypmx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter comobs_mod::nobtypmx = 182</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="comobs__mod_8f90_source.xhtml#l00092">92</a> of file <a class="el" href="comobs__mod_8f90_source.xhtml">comobs_mod.f90</a>.</p>

</div>
</div>
<a id="a42a43e908a81c030c763bee34321a12a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42a43e908a81c030c763bee34321a12a">&#9670;&nbsp;</a></span>num_ob_file_types</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter comobs_mod::num_ob_file_types = 11</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="comobs__mod_8f90_source.xhtml#l00091">91</a> of file <a class="el" href="comobs__mod_8f90_source.xhtml">comobs_mod.f90</a>.</p>

</div>
</div>
<a id="adb5b007cd8dac6d931de9e1894338968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb5b007cd8dac6d931de9e1894338968">&#9670;&nbsp;</a></span>ob_file_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">character (len=30), dimension(<a class="el" href="namespacecomobs__mod.xhtml#a42a43e908a81c030c763bee34321a12a">num_ob_file_types</a>) comobs_mod::ob_file_type = (/'Surface ', 'Sonde ', 'Aircraft ', 'Sat120 ', 'Sat500 ', 'GLOSS ', 'Satwind ', 'Scatwind ', 'MOPS ', 'Precip ', 'Test '/)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="comobs__mod_8f90_source.xhtml#l00142">142</a> of file <a class="el" href="comobs__mod_8f90_source.xhtml">comobs_mod.f90</a>.</p>

</div>
</div>
<a id="afbd8f155185b549a21a27cb69473c633"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbd8f155185b549a21a27cb69473c633">&#9670;&nbsp;</a></span>obs_info</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">type (<a class="el" href="structcomobs__mod_1_1obs__info__type.xhtml">obs_info_type</a>) comobs_mod::obs_info</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="comobs__mod_8f90_source.xhtml#l00130">130</a> of file <a class="el" href="comobs__mod_8f90_source.xhtml">comobs_mod.f90</a>.</p>

</div>
</div>
<a id="aa71c1b9ef72a7a49617c59274ace3c04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa71c1b9ef72a7a49617c59274ace3c04">&#9670;&nbsp;</a></span>obs_info_int_len</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter comobs_mod::obs_info_int_len = (8 * <a class="el" href="namespacecomobs__mod.xhtml#a34b9f81bde395513b5b1053ae84c5d7d">nobtypmx</a>) + (2 * <a class="el" href="namespacecomobs__mod.xhtml#aaa62f98a6e7c54be1716fc5de467b3f9">max_num_acob_files</a>) + 9</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="comobs__mod_8f90_source.xhtml#l00133">133</a> of file <a class="el" href="comobs__mod_8f90_source.xhtml">comobs_mod.f90</a>.</p>

</div>
</div>
<a id="a8e22e1f6c8ca01506bdcb5efae88e6a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e22e1f6c8ca01506bdcb5efae88e6a0">&#9670;&nbsp;</a></span>obs_info_real_len</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="eg__hash_8c.xhtml#a3b6ee100a473e8866bcea6d1fc4041d9">integer</a>, parameter comobs_mod::obs_info_real_len = (2 * <a class="el" href="namespacecomobs__mod.xhtml#ae18fbec0dcfab9374913f5e5d226df43">noblevmx</a> + 1) * <a class="el" href="namespacecomobs__mod.xhtml#a34b9f81bde395513b5b1053ae84c5d7d">nobtypmx</a> + 7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="comobs__mod_8f90_source.xhtml#l00137">137</a> of file <a class="el" href="comobs__mod_8f90_source.xhtml">comobs_mod.f90</a>.</p>

</div>
</div>
<a id="acde5a5eee19c96292939a024cc5571b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acde5a5eee19c96292939a024cc5571b4">&#9670;&nbsp;</a></span>used_files</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">character (len=256), dimension(<a class="el" href="namespacecomobs__mod.xhtml#aaa62f98a6e7c54be1716fc5de467b3f9">max_num_acob_files</a>) comobs_mod::used_files</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="comobs__mod_8f90_source.xhtml#l00141">141</a> of file <a class="el" href="comobs__mod_8f90_source.xhtml">comobs_mod.f90</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
